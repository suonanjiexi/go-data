<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go-Data 管理后台</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus/dist/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        <el-container>
            <el-aside width="200px">
                <el-menu default-active="1">
                    <el-menu-item index="1">
                        <el-icon><monitor /></el-icon>
                        <span>集群状态</span>
                    </el-menu-item>
                    <el-menu-item index="2">
                        <el-icon><setting /></el-icon>
                        <span>参数配置</span>
                    </el-menu-item>
                    <el-menu-item index="3">
                        <el-icon><data-line /></el-icon>
                        <span>性能监控</span>
                    </el-menu-item>
                    <el-menu-item index="4">
                        <el-icon><document /></el-icon>
                        <span>数据管理</span>
                    </el-menu-item>
                </el-menu>
            </el-aside>
            <el-main>
                <router-view></router-view>
            </el-main>
        </el-container>
    </div>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    clusterStatus: {},
                    performanceMetrics: {},
                    configParams: {}
                }
            },
            methods: {
                async fetchClusterStatus() {
                    try {
                        const response = await axios.get('/api/cluster/status');
                        this.clusterStatus = response.data;
                    } catch (error) {
                        console.error('获取集群状态失败:', error);
                    }
                },
                async updateConfig(params) {
                    try {
                        await axios.post('/api/cluster/config', params);
                        this.$message.success('配置更新成功');
                    } catch (error) {
                        this.$message.error('配置更新失败');
                    }
                }
            },
            mounted() {
                this.fetchClusterStatus();
                // 定期刷新集群状态
                setInterval(this.fetchClusterStatus, 5000);
            }
        });
        app.use(ElementPlus);
        app.mount('#app');
    </script>
</body>
</html>